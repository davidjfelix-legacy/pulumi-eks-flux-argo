
# Default recipe, run on `just`
[private]
default:
  just --list

# FIXME: this needs more interactivity
bootstrap:
  #!/usr/bin/env -S bash -euxo pipefail
  read -p "FIXME: prompt: " prompt
  echo ${prompt}

# Use Pulumi to deploy. Pass -y to automatically deploy
deploy *ARGS:
  pulumi up --stack main {{ARGS}}

# Pass CI specific args to deploy
deploy-ci:
  @just deploy -y

# Use Pulumi to destroy. Pass -y to automatically deploy
undeploy *ARGS:
  pulumi down --stack main {{ARGS}}

undeploy-ci:
  @just undeploy -y
